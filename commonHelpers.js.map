{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strick';\n\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst myInput = document.querySelector('#datetime-picker');\nconst strButton = document.querySelector('button[data-start]');\n\nconst dataDays = document.querySelector('span[data-days]');\nconst dataHours = document.querySelector('span[data-hours]');\nconst dataMinutes = document.querySelector('span[data-minutes]');\nconst dataSeconds = document.querySelector('span[data-seconds]');\n\nstrButton.addEventListener('click', start);\n\nlet userSelectedDate;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    console.log(selectedDates[0]);\n    if (userSelectedDate < Date.now()) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      strButton.disabled = true;\n    } else {\n      strButton.disabled = false;\n    }\n  },\n};\n\nflatpickr(myInput, options);\n\nlet isActive = false;\nlet intervalId = null;\n\nfunction start() {\n  if (isActive) {\n    return;\n  }\n\n  isActive = true;\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    const restTime = userSelectedDate - currentTime;\n    const time = convertMs(restTime);\n    updateTimer(time);\n    if (restTime <= 0) {\n      clearInterval(intervalId);\n      const newTime = convertMs(0);\n      updateTimer(newTime);\n    }\n  }, 1000);\n\n  if (intervalId) {\n    strButton.disabled = true;\n    myInput.disabled = true;\n  }\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = addLeadingZero(Math.floor(ms / day)); // Remaining days\n  const hours = addLeadingZero(Math.floor((ms % day) / hour)); // Remaining hours\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute)); // Remaining minutes\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  ); // Remaining seconds\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n  dataDays.innerHTML = `${days}`;\n  dataHours.innerHTML = `${hours}`;\n  dataMinutes.innerHTML = `${minutes}`;\n  dataSeconds.innerHTML = `${seconds}`;\n}\n"],"names":["myInput","strButton","dataDays","dataHours","dataMinutes","dataSeconds","start","userSelectedDate","options","selectedDates","iziToast","flatpickr","isActive","intervalId","currentTime","restTime","time","convertMs","updateTimer","newTime","ms","days","addLeadingZero","hours","minutes","seconds","value"],"mappings":"+IAOA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAY,SAAS,cAAc,oBAAoB,EAEvDC,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAc,SAAS,cAAc,oBAAoB,EAE/DJ,EAAU,iBAAiB,QAASK,CAAK,EAEzC,IAAIC,EACJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAClC,QAAQ,IAAIA,EAAc,CAAC,CAAC,EACxBF,EAAmB,KAAK,OAC1BG,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAClB,CAAO,EACDT,EAAU,SAAW,IAErBA,EAAU,SAAW,EAExB,CACH,EAEAU,EAAUX,EAASQ,CAAO,EAE1B,IAAII,EAAW,GACXC,EAAa,KAEjB,SAASP,GAAQ,CACXM,IAIJA,EAAW,GACXC,EAAa,YAAY,IAAM,CAC7B,MAAMC,EAAc,KAAK,MACnBC,EAAWR,EAAmBO,EAC9BE,EAAOC,EAAUF,CAAQ,EAE/B,GADAG,EAAYF,CAAI,EACZD,GAAY,EAAG,CACjB,cAAcF,CAAU,EACxB,MAAMM,EAAUF,EAAU,CAAC,EAC3BC,EAAYC,CAAO,CACpB,CACF,EAAE,GAAI,EAEHN,IACFZ,EAAU,SAAW,GACrBD,EAAQ,SAAW,IAEvB,CAEA,SAASiB,EAAUG,EAAI,CAOrB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAC1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EACpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EACjEK,EAAUH,EACd,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASH,EAAeI,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASR,EAAY,CAAE,KAAAG,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDvB,EAAS,UAAY,GAAGmB,CAAI,GAC5BlB,EAAU,UAAY,GAAGoB,CAAK,GAC9BnB,EAAY,UAAY,GAAGoB,CAAO,GAClCnB,EAAY,UAAY,GAAGoB,CAAO,EACpC"}